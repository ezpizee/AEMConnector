<form action="{{pathPfx}}{{formAction}}{{#if item_data.edit_id}}?edit_id={{item_data.edit_id}}{{else}}{{#if item_data.id}}?edit_id={{item_data.id}}{{/if}}{{/if}}"
      method="post" class="commerce-form">
    <div class="card mb-3">
        <div class="card-header bg-light">
            <div class="row">
                <div class="col-6"><h3 class="mb-0 mt-0">{{page_title}}</h3></div>
                <div class="col-6">
                    <div class="text-right">
                        {{#if actions.cancel}}<a href="{{list_page}}" class="btn btn-primary"><i class="fa fa-chevron-left"></i>&nbsp;{{i18n 'LABEL_BACK'}}</a>{{/if}}
                        &nbsp;
                        {{#if actions.save}}<button type="submit" class="btn btn-primary"><i class="fas fa-save"></i>&nbsp;{{i18n 'LABEL_SAVE'}}</button>{{/if}}
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body text-justify">
            <ul class="nav nav-tabs" id="prod-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="basic-tab" data-toggle="tab" href="#basic" role="tab" aria-controls="basic" aria-selected="true">
                        {{i18n 'TAB_BASIC'}}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="entities-tab" data-toggle="tab" href="#entities" role="tab" aria-controls="entities" aria-selected="false">
                        {{i18n 'TAB_STORES_AND_CATEGORIES'}}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="attrs-tab" data-toggle="tab" href="#attrs" role="tab" aria-controls="attrs" aria-selected="false">
                        {{i18n 'TAB_PRODUCT_TYPE_AND_ATTRS'}}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="assets-tab" data-toggle="tab" href="#assets" role="tab" aria-controls="assets" aria-selected="false">
                        {{i18n 'TAB_ASSETS_OR_FILES'}}
                    </a>
                </li>
            </ul>
            <div class="tab-content" id="prod-tab-content">
                <div class="tab-pane fade show active" id="basic" role="tabpanel" aria-labelledby="basic-tab">
                    {{#if fieldKeys.name}}
                        <div class="form-group">
                            <label class="control-label" for="name">{{i18n 'LABEL_NAME'}}</label>
                            <input type="text" name="commerce_form[name]" id="name" class="form-control" value="{{item_data.name}}"/>
                        </div>
                    {{/if}}
                    <div class="row">
                        <div class="col-6">
                            {{#if fieldKeys.published_start}}
                                {{!--
                                <div class="form-group">
                                    <label class="control-label" for="published_start">{{i18n 'LABEL_PUBLISH_START_DATE'}}</label>
                                    <input type="text" name="commerce_form[published_start]" id="published_start" class="form-control"
                                           data-trigger="datetimepicker" data-date-format="yyyy-mm-dd"
                                           value="{{item_data.published_start}}" />
                                </div>
                                --}}
                                <div class="form-group">
                                    <label class="control-label" for="published_start">{{i18n 'LABEL_PUBLISH_START_DATE'}}</label>
                                    <div class="input-group date" data-target-input="nearest" data-trigger="datetimepicker">
                                        <input type="text" name="commerce_form[published_start]" class="form-control datetimepicker-input"
                                               value="{{item_data.published_start}}"/>
                                        <div class="input-group-append"><div class="input-group-text"><i class="fa fa-calendar"></i></div></div>
                                    </div>
                                </div>
                            {{/if}}
                            {{#if fieldKeys.sku}}
                                <div class="form-group">
                                    <label class="control-label" for="sku">{{i18n 'LABEL_SKU'}}</label>
                                    <input type="text" name="commerce_form[sku]" id="sku" class="form-control" value="{{item_data.sku}}"/>
                                </div>
                            {{/if}}
                            {{#if fieldKeys.barcode}}
                                <div class="form-group">
                                    <label class="control-label" for="barcode">{{i18n 'LABEL_BARCODE'}}</label>
                                    <input type="text" name="commerce_form[barcode]" id="barcode" class="form-control" value="{{item_data.barcode}}"/>
                                </div>
                            {{/if}}
                            {{#if fieldKeys.product_mode}}
                                <div class="form-group">
                                    <label class="control-label" for="product_mode">{{i18n 'LABEL_PRODUCT_MODE'}}</label>
                                    <select name="commerce_form[product_mode]" id="product_mode" class="form-control">
                                        <option value="">{{i18n 'SELECT_ONE'}}</option>
                                        <option value="physical"{{#eq item_data.product_mode 'physical'}} selected{{/eq}}>{{i18n 'PRODUCT_MODE_PHYSICAL'}}</option>
                                        <option value="download"{{#eq item_data.product_mode 'download'}} selected{{/eq}}>{{i18n 'PRODUCT_MODE_DOWNLOAD'}}</option>
                                        <option value="subscription"{{#eq item_data.product_mode 'subscription'}} selected{{/eq}}>{{i18n 'PRODUCT_MODE_SUBSCRIPTION'}}</option>
                                    </select>
                                </div>
                            {{/if}}
                        </div>
                        <div class="col-6">
                            {{#if fieldKeys.published_end}}
                                {{!--
                                <div class="form-group">
                                    <label class="control-label" for="published_end">{{i18n 'LABEL_PUBLISH_END_DATE'}}</label>
                                    <input type="text" name="commerce_form[published_end]" id="published_end" class="form-control"
                                           data-trigger="datepicker" data-date-format="yyyy-mm-dd"
                                           value="{{item_data.published_end}}" />
                                </div>
                                --}}
                                <div class="form-group">
                                    <label class="control-label" for="published_end">{{i18n 'LABEL_PUBLISH_END_DATE'}}</label>
                                    <div class="input-group date" data-target-input="nearest" data-trigger="datetimepicker">
                                        <input type="text" name="commerce_form[published_end]" class="form-control datetimepicker-input"
                                               value="{{item_data.published_end}}"/>
                                        <div class="input-group-append"><div class="input-group-text"><i class="fa fa-calendar"></i></div></div>
                                    </div>
                                </div>
                            {{/if}}
                            {{#if fieldKeys.in_stock}}
                                <div class="form-group">
                                    <label class="control-label" for="in_stock">{{i18n 'LABEL_IN_STOCK'}} (-1 if not applicable)</label>
                                    <input type="text" name="commerce_form[in_stock]" id="in_stock" class="form-control" value="{{item_data.in_stock}}"/>
                                </div>
                            {{/if}}
                            {{#if fieldKeys.price}}
                                <div class="form-group">
                                    <label class="control-label" for="price">{{i18n 'LABEL_PRICE'}}</label>
                                    <input type="number" step="any" name="commerce_form[price]" id="price" class="form-control" value="{{item_data.price}}"/>
                                </div>
                            {{/if}}
                            {{#if fieldKeys.modal_currency}}{{require "partials/modal_currency" this}}{{/if}}
                        </div>
                    </div>
                    {{#if fieldKeys.description}}
                        <div class="form-group">
                            <label class="control-label" for="description">{{i18n 'LABEL_DESCRIPTION'}}</label>
                            <textarea name="commerce_form[description]" id="description" class="form-control basic">{{item_data.description}}</textarea>
                        </div>
                    {{/if}}
                </div>
                <div class="tab-pane fade" id="entities" role="tabpanel" aria-labelledby="entities-tab">
                    {{#if fieldKeys.modal_store}}{{require "partials/modal_stores" this}}{{/if}}
                    {{#if fieldKeys.modal_category}}{{require "partials/modal_categories" this}}{{/if}}
                </div>
                <div class="tab-pane fade" id="attrs" role="tabpanel" aria-labelledby="attrs-tab">
                    {{#if fieldKeys.modal_product_type}}{{require "partials/modal_product_type" this}}{{/if}}
                    {{#if fieldKeys.modal_product_type}}
                        <div id="product_type_attrs_set"
                             data-type='{{json_encode item_data.product_type}}'>
                            {{#if item_data.product_type.product_attrs}}
                                {{#each item_data.product_type.product_attrs}}
                                    <div class="attr_field">{{{require this.product_attr_field this}}}</div>
                                {{/each}}
                            {{/if}}
                        </div>
                    {{/if}}
                </div>
                <div class="tab-pane fade" id="assets" role="tabpanel" aria-labelledby="assets-tab">
                    {{#if fieldKeys.modal_file}}{{require "partials/modal_files" this}}{{/if}}
                </div>
            </div>
        </div>
    </div>
    <input type="hidden" name="commerce_form[edit_id]" value="{{#if item_data.edit_id}}{{item_data.edit_id}}{{else}}{{item_data.id}}{{/if}}"/>
    <input type="hidden" name="csrftoken" value="{{csrftoken}}"/>
</form>
<script>WC.observers.init();WC.formUtil.init();</script>